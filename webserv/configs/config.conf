server {
    listen 0.0.0.0:9290;
    listen localhost:9290;
    listen localhost:1337;
    # listen localhost:9290;
    server_name admin.local;

    root www/admin;
    index index.html;
    client_max_body_size 512k;

    location / {
        allowed_methods GET;
    }
}

server {
    listen localhost:4242;
    listen 0.0.0.0:8080;
    listen localhost:1337;
    listen 10.30.234.188:1337;

    server_name www.example.local;

    root /www;                         # document root
    index index.html about.htm;        # default index files
    client_max_body_size 2M;           # body size limit

    # Map multiple error codes to pages
    error_page 404 /errors/404.html;
    error_page 500 /errors/500.html;

    # Server-wide CGI (extension -> interpreter)
    cgi .php /usr/bin/php-cgi;

    # Default location (static files under root)
    location / {
        allowed_methods GET POST;
    }

    # Enable autoindex for assets directory
    location /assets/ {
        autoindex on;
    }

    # File uploads (POST body stored here)
    location /upload {
        allowed_methods POST;
        upload_store www/uploads;
    }

    # Allow DELETE on uploaded files
    location /uploads/ {
        allowed_methods GET DELETE;
    }


    # Simple redirect
    location /old {
        redirect 301 /new;
    }

    # Per-location CGI (Python scripts)
    location /cgi/ {
        cgi .py /usr/bin/python3;
    }
}

